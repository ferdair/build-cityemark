(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{497:function(e,o,t){"use strict";t.r(o);t(7),t(10),t(8),t(102),t(63),t(197),t(12),t(13),t(11),t(9);var r=t(2),n=(t(64),t(14)),c=t(83),d=t.n(c),l=t(82),v=t(191);function P(object,e){var o=Object.keys(object);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(object);e&&(t=t.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),o.push.apply(o,t)}return o}var m={name:"EditarVitrina",layout:"usuarioComercio",middleware:["auth"],data:function(){return{editedIndex:-1,eid:null,picture:"",valid:null,productos:null,dialog:!1,tipoProducto:null,nuevoP:{nombreProducto:"",idComercio:0,descripcion:"",tipoProducto:0,precioPVP:0,precioPorMayor:0,minimoPorMayor:0,precioVendedores:0,cantDisponible:0,tiempoEntregaHoras:0},file:""}},created:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var t,data,r,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.$route.params.id,o.next=3,d.a.get(v.a.endpoint+"/producto.php?id="+e.loggedInUser.idComercio);case 3:return data=o.sent,r=data.data.data.filter((function(p){return String(p.vitrina)===String(t)&&1===p.estado})),e.productos=r,o.next=8,d.a.get(v.a.endpoint+"/tipoProducto.php");case 8:n=o.sent,e.tipoProducto=n.data.data.filter((function(p){return 0===p.estado}));case 10:case"end":return o.stop()}}),o)})))()},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?P(Object(source),!0).forEach((function(o){Object(r.a)(e,o,source[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):P(Object(source)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(source,o))}))}return e}({},Object(l.b)(["getAux","loggedInUser"])),methods:{esconder:function(){this.dialog=!1,this.editedIndex=-1},reset:function(){this.$refs.form.reset()},validate:function(){this.$refs.form.validate()},resetValidation:function(){this.$refs.form.resetValidation()},uploadImage:function(e){this.file=e.target.files[0]},subirImagen:function(){var e=this;if(this.$refs.form.validate(),-1===this.editedIndex){var o=Date.now(),t=this.$fireStorageObj().ref().child("productos/".concat(o)).put(this.file);t.on("state_changed",(function(e){var progress=e.bytesTransferred/e.totalBytes*100;console.log("Upload is "+progress+"% done")}),(function(e){console.log(e)}),(function(){t.snapshot.ref.getDownloadURL().then((function(o){console.log("File available at",o),console.log(o),e.picture=o}))}))}this.registrar()},registrar:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var t,r,n,c,a,l,b;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log(e.editedIndex),-1!==e.editedIndex){o.next=31;break}return e.nuevoP.idComercio=e.loggedInUser.idComercio,e.nuevoP.precioPVP=parseFloat(e.nuevoP.precioPVP),e.nuevoP.precioPorMayor=parseFloat(e.nuevoP.precioPorMayor),e.nuevoP.minimoPorMayor=parseFloat(e.nuevoP.minimoPorMayor),e.nuevoP.precioVendedores=parseFloat(e.nuevoP.precioVendedores),e.nuevoP.cantDisponible=parseFloat(e.nuevoP.cantDisponible),e.nuevoP.tiempoEntregaHoras=parseFloat(e.nuevoP.tiempoEntregaHoras),o.next=11,d.a.post(v.a.endpoint+"/producto.php",e.nuevoP);case 11:if(200!==(t=o.sent).data.code){o.next=28;break}return r=e.$route.params.id,n={url_imgProducto:e.picture,idProducto:t.data.data[0].id_producto},console.log(n),o.next=18,d.a.post(v.a.endpoint+"/imagenProducto.php",n);case 18:return c={idProducto:t.data.data[0].id_producto,idVitrina:r},o.next=21,d.a.post(v.a.endpoint+"/productoVitrina.php",c);case 21:a=e.productos.push(t.data.data[0]),e.productos[a-1].id_producto=t.data.data[0].id_producto,e.productos[a-1].nombreTipoProducto=t.data.data[0].nombreTipoProducto,e.dialog=!1,e.reset(),o.next=29;break;case 28:alert("ERROR");case 29:o.next=45;break;case 31:return e.nuevoP.idComercio=e.loggedInUser.idComercio,e.nuevoP.precioPVP=parseFloat(e.nuevoP.precioPVP),e.nuevoP.precioPorMayor=parseFloat(e.nuevoP.precioPorMayor),e.nuevoP.minimoPorMayor=parseFloat(e.nuevoP.minimoPorMayor),e.nuevoP.precioVendedores=parseFloat(e.nuevoP.precioVendedores),e.nuevoP.cantDisponible=parseFloat(e.nuevoP.cantDisponible),e.nuevoP.tiempoEntregaHoras=parseFloat(e.nuevoP.tiempoEntregaHoras),l={id:e.eid,nombreProducto:e.nuevoP.nombreProducto,idComercio:e.loggedInUser.idComercio,descripcion:e.nuevoP.descripcion,tipoProducto:e.nuevoP.tipoProducto,observaciones:"S/N",palabrasClave:"S/N",estado:1,orden:1,precioPVP:e.nuevoP.precioPVP,precioPorMayor:e.nuevoP.precioPorMayor,minimoPorMayor:e.nuevoP.minimoPorMayor,precioReferidos:0,precioVendedores:e.nuevoP.precioVendedores,cantDisponible:e.nuevoP.cantDisponible,tiempoEntregaHoras:e.nuevoP.tiempoEntregaHoras},b={id_producto:e.editedIndex,nombreProducto:e.nuevoP.nombreProducto,idComercio:e.loggedInUser.idComercio,descripcion:e.nuevoP.descripcion,tipoProducto:e.nuevoP.tipoProducto,precioPVP:e.nuevoP.precioPVP,precioPorMayor:e.nuevoP.precioPorMayor,minimoPorMayor:e.nuevoP.minimoPorMayor,precioVendedores:e.nuevoP.precioVendedores,cantDisponible:e.nuevoP.cantDisponible,tiempoEntregaHoras:e.nuevoP.tiempoEntregaHoras},o.next=42,d.a.put(v.a.endpoint+"/producto.php",l);case 42:200===o.sent.data.code?(alert("Producto Actualizado"),console.log(l),e.productos.splice(e.editedIndex,1,b)):alert("Producto No se pudo actualizar"),e.editedIndex=-1;case 45:case"end":return o.stop()}}),o)})))()},borrar:function(e){var o=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.patch(v.a.endpoint+"/producto.php",{id:e,campo:"estado",dato:2});case 2:r=o.productos.map((function(e){return e.id_producto})).indexOf(e),o.productos.splice(r,1);case 4:case"end":return t.stop()}}),t)})))()},editar:function(e){var o=this.productos.map((function(e){return e.id_producto})).indexOf(e);Object.assign(this.nuevoP,this.productos[o]),this.editedIndex=o,this.eid=e,this.dialog=!0}}},f=t(72),h=t(124),V=t.n(h),y=t(390),x=t(380),w=t(377),O=t(407),_=t(486),I=t(480),j=t(382),C=t(154),M=t(182),D=t(117),k=t(183),E=t(184),F=t(80),R=t(487),S=t(491),component=Object(f.a)(m,(function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("v-app",[t("v-container",[t("v-row",e._l(e.productos,(function(o){return t("v-col",{key:o.id_producto},[t("v-card",{staticClass:"mx-auto",attrs:{elevation:"24","max-width":"444"}},[t("v-carousel",{attrs:{continuous:!1,cycle:e.cycle,"show-arrows":!1,"hide-delimiter-background":"","delimiter-icon":"mdi-minus",height:"300"}}),e._v(" "),t("v-list",{attrs:{"two-line":""}},[t("v-list-item",[t("v-list-item-avatar",[t("v-img",{attrs:{src:"https://cdn.vuetifyjs.com/images/john.png"}})],1),e._v(" "),t("v-list-item-content",[t("v-list-item-title",[e._v("John Leider")]),e._v(" "),t("v-list-item-subtitle",[e._v("Author")])],1),e._v(" "),t("v-list-item-action",[t("v-switch",{attrs:{label:"Cycle Slides",inset:""},model:{value:e.cycle,callback:function(o){e.cycle=o},expression:"cycle"}})],1)],1)],1)],1),e._v(" "),t("v-card",[t("v-img",{attrs:{src:e.img,height:"200px"}}),e._v(" "),t("v-card-title",[e._v(" "+e._s(e.nombre)+" ")]),e._v(" "),t("v-divider"),e._v(" "),t("v-card-text",[e._v(" Stock: "+e._s(e.stock)+" ")])],1)],1)})),1)],1)],1)}),[],!1,null,null,null);o.default=component.exports;V()(component,{VApp:y.a,VCard:x.a,VCardText:w.c,VCardTitle:w.d,VCarousel:O.a,VCol:_.a,VContainer:I.a,VDivider:j.a,VImg:C.a,VList:M.a,VListItem:D.a,VListItemAction:k.a,VListItemAvatar:E.a,VListItemContent:F.a,VListItemSubtitle:F.b,VListItemTitle:F.c,VRow:R.a,VSwitch:S.a})}}]);